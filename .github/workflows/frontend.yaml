name: Frontend CI

on:
  push:
    paths:
      - "frontend/**"
  pull_request:
    paths:
      - "frontend/**"

jobs:
  frontend:
    runs-on: ubuntu-latest

    steps:
      # 1️⃣ Checkout
      - uses: actions/checkout@v4

      # 2️⃣ Build Docker image
      - name: Build frontend Docker image
        run: docker build -t frontend-dev ./frontend

      # 3️⃣ Install dependencies (npm ci)
      - name: Install dependencies
        run: docker run --rm -v ${{ github.workspace }}/frontend:/app frontend-dev npm ci

      # 4️⃣ Lint
      - name: Lint
        run: docker run --rm -v ${{ github.workspace }}/frontend:/app frontend-dev npm run lint

      # 5️⃣ Tests
      - name: Tests
        run: docker run --rm -v ${{ github.workspace }}/frontend:/app frontend-dev npm test -- --watch=false

      # 6️⃣ Build
      - name: Build
        run: docker run --rm -v ${{ github.workspace }}/frontend:/app frontend-dev npm run build
